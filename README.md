# Task Management System

## Содержание

- [Инструкция по запуску](#инструкция-по-запуску)
- [Структура приложения](#структура-приложения)
- [Swagger документация](#Swagger-документация)
- [Запуск кластера Kafka и Zookeeper](#Запуск-кластера-Kafka-и-Zookeeper)
- [Тестовые учетные записи](#Тестовые-учетные-записи)
  
## Описание проекта

Это система управления задачами, которая позволяет создавать, отслеживать и управлять задачами в команде. В системе реализован учет времени работы над задачами и назначение ответственных за задачи пользователей. Система поддерживает различные роли пользователей:

- **ADMIN** — администратор системы с полными правами.
- **MANAGER** — менеджер, который управляет задачами и назначает ответственных.
- **USER** — обычный пользователь, который может выполнять задачи.

## Структура приложения

Приложение разбито на несколько модулей, каждый из которых выполняет свою функцию:

- **api-gateway**: 
  - Маршрутизирует входящие запросы к соответствующим микросервисам.

- **task-management**: 
  - CRUD сервис для управления задачами (тасками), позволяющий создавать, читать, обновлять и удалять задачи.

- **statistic**: 
  - Сервис для сбора отчетов и статистики по задачам, предоставляющий аналитическую информацию о выполненных задачах.

- **auth**: 
  - Сервис для регистрации и хранения пользователей, обеспечивающий аутентификацию и авторизацию.

Эта модульная архитектура позволяет легко управлять и масштабировать приложение.


## Стек технологий
- **Spring Boot**
- **JPA/Hibernate** 
- **Flyway**
- **Kafka**
- **Spring Cloud** — 
- **Spring Security**
- **Eureka**
- **PostgreSQL**


## Swagger документация
В проекте реализована централизованная Swagger документация для всех сервисов, которая доступна по следующему адресу: http://localhost:9092/swagger-ui/index.html
Swagger предоставляет возможность просматривать и взаимодействовать с API всех сервисов проекта. В верхней правой части интерфейса находится выпадающий список, где можно выбрать конкретный сервис для отображения его документации. Например:
- `auth`
- `task-management`
- `statistic`

Таким образом, вы можете легко переключаться между сервисами и их API в одном месте. 



## Инструкция по запуску.
### Конфигурация 
Перед запуском проекта убедитесь, что в `application.yml` указаны правильные параметры для подключения к базе данных (для всех сервисов):

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/task_db
    username: your_db_username
    password: your_db_password
  flyway:
    user: your_db_username
    password: your_db_password
```

## Запуск кластера Kafka и Zookeeper

Для локального развертывания кластера Apache Kafka и Zookeeper необходимо использовать Docker Compose файл `zk-single-kafka-multiple1.yml`. Этот файл содержит конфигурацию для одного экземпляра Zookeeper и нескольких брокеров Kafka.

### Шаги для запуска кластера

1. Убедитесь, что у вас установлены Docker и Docker Compose.
   
   Для проверки выполните следующие команды:

   ```bash
   docker --version
   docker-compose --version
   ```
2. Перейдите в директорию, где находится файл zk-single-kafka-multiple1.yml. 
```bash
cd path/to/taskManagerNew
```
3. Запустите кластер с помощью Docker Compose:
```bash
docker-compose -f zk-single-kafka-multiple1.yml up -d
```
Убедитесь, что используемые порты (2181, 9097, 9098, 9099) не заняты на вашей машине

## Тестовые учетные записи

При первом запуске приложения в базе данных будет создано 5 пользователей с разными ролями. Все пользователи будут иметь одинаковый пароль (Password1998!@) для упрощения тестирования.

## Созданные пользователи

| Имя          | Фамилия      | Email                         | Роль   | Пароль             |
|--------------|--------------|-------------------------------|--------|--------------------|
| Иван         | Иванов      | admin@example.com            | ADMIN  | Password1998!@     |
| Петр         | Петров      | manager@example.com          | MANAGER| Password1998!@     |
| Анна         | Сидорова    | anna.sidorova@example.com    | USER   | Password1998!@     |
| Елена        | Николаева   | elena.nikolaeva@example.com  | USER   | Password1998!@     |
| Дмитрий      | Кузнецов    | dmitry.kuznetsov@example.com  | USER   | Password1998!@     |

Вы можете использовать эти учетные данные для тестирования функциональности приложения.
